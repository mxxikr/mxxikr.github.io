---
title:  "[Java í”„ë¡œê·¸ë˜ë°] 10ê°• - java.nio íŒ¨í‚¤ì§€ì˜ í™œìš©"
author:
  name: mxxikr
  link: https://github.com/mxxikr
date: 2025-04-28 00:00:00 +0900
category:
  - [Language, Java]
tags:
  - [knou, java]
math: true
mermaid: true
---

**<center>ğŸ’¡í•´ë‹¹ ê²Œì‹œê¸€ì€ ë°©ì†¡í†µì‹ ëŒ€í•™êµ ê¹€í¬ì²œ êµìˆ˜ë‹˜ì˜ 'Java í”„ë¡œê·¸ë˜ë°' ê°•ì˜ë¥¼ ê°œì¸ ê³µë¶€ ëª©ì ìœ¼ë¡œ ë©”ëª¨í•˜ì˜€ìŠµë‹ˆë‹¤. </center>**

<br/><br/>

# **í•™ìŠµ ê°œìš”**

---

- `java.nio`íŒ¨í‚¤ì§€ëŠ” ê¸°ì¡´ `java.io`íŒ¨í‚¤ì§€ë¥¼ ê°œì„ í•œ ìƒˆë¡œìš´ ì…ì¶œë ¥ íŒ¨í‚¤ì§€ì„
- `File`í´ë˜ìŠ¤ë¥¼ ëŒ€ì²´í•˜ëŠ” `Path`ì¸í„°í˜ì´ìŠ¤, ì…ì¶œë ¥ ê¸°ëŠ¥ì„ ëª¨ë‘ ì œê³µí•˜ê³  ë²„í¼ë¥¼ ì‚¬ìš©í•˜ê²Œ ì„¤ê³„ëœ `FileChannel`í´ë˜ìŠ¤, íŒŒì¼ì˜ ì½ê¸°/ì“°ê¸°ë‚˜ ì¡°ì‘ì„ ìœ„í•œ ì •ì  ë©”ì†Œë“œë¥¼ ì œê³µí•˜ëŠ” `Files`í´ë˜ìŠ¤ ë“±ì„ í•™ìŠµí•¨
- `WatchService`ëŠ” ë””ë ‰í„°ë¦¬ì— ìƒê¸°ëŠ” ë³€í™”ë¥¼ ê°ì‹œí•˜ëŠ” ì„œë¹„ìŠ¤ì„

<br/><br/>

# **í•™ìŠµ ëª©í‘œ**

---

- `Path`ì¸í„°í˜ì´ìŠ¤ì˜ ì‚¬ìš©ë²•ì„ ì´í•´í•¨
- `Files`í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ `Path`ê°ì²´ë¥¼ ì¡°ì‘í•  ìˆ˜ ìˆìŒ
- ë²„í¼ì™€ `FileChannel`í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ íŒŒì¼ ì…ì¶œë ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŒ
- `WatchServie`ë¥¼ í™œìš©í•˜ì—¬ ë””ë ‰í„°ë¦¬ì˜ ë³€í™”ë¥¼ ê°ì‹œí•  ìˆ˜ ìˆìŒ

<br/><br/>

# ê°•ì˜ë¡

---

## `java.nio`íŒ¨í‚¤ì§€

### `java.nio`íŒ¨í‚¤ì§€

- NIOëŠ” New Input Outputì˜ ì•½ì
    - ê¸°ì¡´ `java.io`íŒ¨í‚¤ì§€ë¥¼ ê°œì„ í•œ ìƒˆë¡œìš´ ì…ì¶œë ¥ íŒ¨í‚¤ì§€
- JDK 7ë¶€í„°ëŠ” íŒŒì¼ I/Oë¥¼ ê°œì„ í•œ NIO2ë„ ë“±ì¥
    - `java.nio`ì™€ ê·¸ê²ƒì˜ ì„œë¸Œ íŒ¨í‚¤ì§€ í˜•íƒœ
        - `java.nio.file`, `java.nio.channels`, `java.nio.charset`ë“±
    - File í´ë˜ìŠ¤ë³´ë‹¤ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” **Path**
    - **Files**ì˜ `static`ë©”ì†Œë“œë¥¼ í†µí•œ íŒŒì¼/ë””ë ‰í„°ë¦¬ì˜ ì¡°ì‘, íŒŒì¼ì˜ ì½ê¸°/ì“°ê¸°
    - íŒŒì¼ ì…ë ¥ê³¼ íŒŒì¼ ì¶œë ¥ì´ ëª¨ë‘ ê°€ëŠ¥í•œ **FileChannel** í´ë˜ìŠ¤
        - ë²„í¼ë§ ê¸°ëŠ¥, ë©€í‹° ìŠ¤ë ˆë“œì— ì•ˆì „
    - ë¹„ ë™ê¸°ì‹ íŒŒì¼ ì…ì¶œë ¥ì„ ìœ„í•œ **AsynchronousFileChannel** í´ë˜ìŠ¤
        - non-blocking ë°©ì‹ íŒŒì¼ ì…ì¶œë ¥

### `Path`ì¸í„°í˜ì´ìŠ¤

- `java.nio.file`íŒ¨í‚¤ì§€ì— ì¡´ì¬í•˜ë©° `java.io.File`í´ë˜ìŠ¤ë¥¼ ëŒ€ì‹ í•¨
- íŒŒì¼ ì‹œìŠ¤í…œì— ì¡´ì¬í•˜ëŠ” **íŒŒì¼ì´ë‚˜ ë””ë ‰í„°ë¦¬ì— í•´ë‹¹í•˜ëŠ” ê²½ë¡œ**ë¥¼ í‘œí˜„
    - ì ˆëŒ€ ê²½ë¡œ ë˜ëŠ” ìƒëŒ€ ê²½ë¡œë¡œ í‘œí˜„ ë¨
- ê²½ë¡œì˜ ìƒì„±, ê²½ë¡œì˜ ë¹„êµ, ê²½ë¡œ ì •ë³´ ì¶”ì¶œ, ê²½ë¡œ ìš”ì†Œ ì¡°ì‘ ê¸°ëŠ¥ ë“±ì„ ì œê³µ
    - `java.nio.file.Files`í´ë˜ìŠ¤ì˜ `static`ë©”ì†Œë“œë¥¼ ì´ìš©í•´ `Path`ê°ì²´ì— ëŒ€í•œ ë‹¤ì–‘í•œ ì‹¤ì œ ì¡°ì‘(ìƒì„±, ì½ê¸°, ì“°ê¸°, ë³µì‚¬, ì´ë™ ë“±)ì´ ê°€ëŠ¥í•¨
- `Path`ê°ì²´ì˜ ìƒì„± ë°©ë²•
    
    ```java
    Path p = Paths.get("C:\\tmp\\foo");
    ```
    
    - íŒŒì¼ì´ë‚˜ ë””ë ‰í„°ë¦¬ì˜ ì ˆëŒ€ ë˜ëŠ” ìƒëŒ€ ê²½ë¡œë¥¼ ëª…ì‹œí•´ì•¼ í•¨

### **`Path`ì¸í„°í˜ì´ìŠ¤ì˜ ë©”ì†Œë“œ**

- ì£¼ìš” ë©”ì†Œë“œ
    
    
    | **ë©”ì†Œë“œ** | **ì„¤ëª…** |
    | --- | --- |
    | `int compareTo(Path other)`| ë‘ ê²½ë¡œë¥¼ ë¹„êµí•˜ì—¬ ê°™ìœ¼ë©´ 0ì„ ë°˜í™˜ |
    | `Path getFileName()`| ë””ë ‰í„°ë¦¬ ë˜ëŠ” íŒŒì¼ì˜ ì´ë¦„ì„ `Path`ê°ì²´ë¡œ ë¦¬í„´ |
    | `FileSystem getFileSystem()`| `Path`ê°ì²´ë¥¼ ë§Œë“¤ì–´ ì¤€ `FileSystem`ê°ì²´ë¥¼ ë¦¬í„´ |
    | `Path getName(int index)`| ê²½ë¡œì—ì„œ indexì— í•´ë‹¹í•˜ëŠ” ì´ë¦„ì„ `Path`ê°ì²´ë¡œ ë¦¬í„´ |
    | `int getNameCount()`| ê²½ë¡œì— í¬í•¨ëœ ì›ì†Œì˜ ê°œìˆ˜ë¥¼ ë¦¬í„´ |
    | `Path getParent()`| ë¶€ëª¨ ê²½ë¡œë¥¼ `Path`ê°ì²´ë¡œ ë¦¬í„´ |
    | `Path getRoot()`| ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ë¥¼ `Path`ê°ì²´ë¡œ ë¦¬í„´ |
    | `Iterator<Path> iterator()`| ê²½ë¡œì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  ë””ë ‰í„°ë¦¬ ë˜ëŠ” íŒŒì¼ì˜ ì´ë¦„ì„ Iterator ê°ì²´ë¡œ ë¦¬í„´ |
    | `File toFile()`| `Path`ê°ì²´ë¥¼ `File`ê°ì²´ë¡œ ë³€í™˜í•˜ì—¬ ë¦¬í„´ |
    | `String toString()`| `Path`ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ë¦¬í„´ |

### **`Path`ì¸í„°í˜ì´ìŠ¤ì˜ ì‚¬ìš© ì˜ˆ**

- `Path`ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš© ì˜ˆì œ
    
    ```java
    import java.util.*;
    import java.nio.file.*;
    
    public class Main {
        public static void main(String args[]) {
            try {
                Path path = Paths.get("C:\\windows\\system32\\drivers\\etc\\hosts");

                System.out.println("íŒŒì¼ ì´ë¦„ : " + path.getFileName());
                System.out.println("ìƒìœ„ í´ë” : " + path.getParent().getFileName());
                System.out.println("ê²½ë¡œ ê¸¸ì´ : " + path.getNameCount());

                System.out.print("í˜„ì¬ ê²½ë¡œ : ");
                for (int i = 0; i < path.getNameCount(); i++)
                    System.out.print(path.getName(i) + "\\");

                Iterator<Path> it = path.iterator(); // Iteratorë¥¼ ì‚¬ìš©í•˜ì—¬ ê²½ë¡œë¥¼ ìˆœíšŒ
                System.out.print("\ní˜„ì¬ ê²½ë¡œ : ");
                while (it.hasNext())
                    System.out.print(it.next().getFileName() + "\\");
                System.out.println();

            } catch (Exception e) {
                System.out.println(e);
            }
        }
    }
    
    // íŒŒì¼ ì´ë¦„ : hosts
    // ìƒìœ„ í´ë” : etc
    // ê²½ë¡œ ê¸¸ì´ : 5
    // í˜„ì¬ ê²½ë¡œ : windows\system32\drivers\etc\hosts\
    // í˜„ì¬ ê²½ë¡œ : windows\system32\drivers\etc\hosts\
    ```
    

### **`FileSystem`í´ë˜ìŠ¤ì™€ `FileStore`í´ë˜ìŠ¤**

- **`FileSystem`** í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œ
    - `FileSystem`ì€ íŒŒì¼ ì‹œìŠ¤í…œì— ëŒ€í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µ
        - `FileSystems.getDefault()`ì€ ê¸°ë³¸ íŒŒì¼ ì‹œìŠ¤í…œì„ ë¦¬í„´ í•¨
    - `Iterable <FileStore> getFileStores()`
        - í•˜ë‚˜ ì´ìƒì˜ íŒŒì¼ ìŠ¤í† ì–´ë¡œ êµ¬ì„±ë¨
    - `WatchService newWatchService()`
- **`FileStore`** í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œ
    - `FileStore`ëŠ” ì €ì¥ì†Œ(íŒŒí‹°ì…˜ ë˜ëŠ” ë³¼ë¥¨)ë¥¼ í‘œí˜„í•¨
        
        ```java
        String name(), String type()
        ```
        
        ```java
        long getTotalSpace()
        ```
        
        ```java
        long getUnallocatedSpace()
        ```
        
        ```java
        long getUsableSpace()
        ```
        

### **`FileSystem`ê³¼ `FileStore`í´ë˜ìŠ¤ì˜ ì‚¬ìš© ì˜ˆ**

- `FileSystem`ê°ì²´ë¡œ ë””ìŠ¤í¬ ì •ë³´ ì¶œë ¥í•˜ê¸°
    
    ```java
    import java.nio.file.*;
    
    public class Main {
        public static void main(String args[]) throws Exception {
            FileSystem fs = FileSystems.getDefault();

            for (FileStore store: fs.getFileStores()) {
                System.out.println("ë“œë¼ì´ë¸Œ ì´ë¦„ : " + store.name());
                System.out.println("íŒŒì¼ì‹œìŠ¤í…œ : " + store.type());
                long total = store.getTotalSpace();
                long free = store.getUnallocatedSpace();
                System.out.println("ì „ì²´ ê³µê°„ : " + total + " bytes");
                System.out.println("ì‚¬ìš© ì¤‘ì¸ ê³µê°„ : " + (total - free) + " bytes");
                System.out.println("ì‚¬ìš© ê°€ëŠ¥í•œ ê³µê°„ : " + free + " bytes");
                System.out.println();
            }
        }
    }
    
    // ë“œë¼ì´ë¸Œ ì´ë¦„ : Cë“œë¼ì´ë¸Œ
    // íŒŒì¼ì‹œìŠ¤í…œ : NTFS
    // ì „ì²´ ê³µê°„ : 499431501824 bytes
    // ì‚¬ìš© ì¤‘ì¸ ê³µê°„ : 462690144256 bytes
    // ì‚¬ìš© ê°€ëŠ¥í•œ ê³µê°„ : 36741357568 bytes
    ```
    

### **`Files`í´ë˜ìŠ¤**

- íŒŒì¼ ì¡°ì‘ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” **`static`ë©”ì†Œë“œ**ë¥¼ ì œê³µí•¨
- ë©”ì†Œë“œëŠ” **`Path`ê°ì²´ë¥¼ ì¸ì**ë¡œ ê°€ì§€ê³  ì‘ì—…í•¨
- íŒŒì¼ì˜ ì½ê¸°ì™€ ì“°ê¸° ë©”ì†Œë“œ
    
    ```java
    byte[] readAllBytes(Path)
    ```
    
    ```java
    Path write(Path, byte[])
    ```
    
- íŒŒì¼ì´ë‚˜ ë””ë ‰í„°ë¦¬ì˜ ê²€ì‚¬/ìƒì„±/ì‚­ì œ/ë³µì‚¬/ì´ë™/ì†ì„± ê´€ë¦¬ ë©”ì†Œë“œ
    
    ```java
    boolean isDirectory(Path)
    ```
    
    ```java
    boolean isRegularFile(Path)
    ```
    
    ```java
    Path createFile(Path)
    ```
    
    ```java
    Path createDirectory(Path)
    ```
    
    ```java
    void delete(Path)
    ```
    
    ```java
    Path copy(Path, Path)
    ```
    
    ```java
    Path move(Path, Path)
    ```
    
    ```java
    long size(Path)
    ```
    
    ```java
    UserPrincipal getOwner(Path)
    ```
    

### **`Files`í´ë˜ìŠ¤ì˜ ì‚¬ìš© ì˜ˆ**

- ë””ë ‰í„°ë¦¬ ë‚´ìš© í™•ì¸í•˜ê¸°
    
    ```java
    import java.nio.file.*;
    
    public class Main {
        public static void main(String args[]) throws Exception {
            Path path = Paths.get("C:\\Java");
            DirectoryStream<Path> ds = Files.newDirectoryStream(path);
            for (Path p : ds) {
                if (Files.isDirectory(p)) {
                    System.out.println("[ë””ë ‰í„°ë¦¬] " + p.getFileName());
                } else {
                    System.out.print("[íŒŒì¼] " + p.getFileName());
                    System.out.println(" (" + Files.size(p) + ")");
                }
            }
        }
    }
    
    // [ë””ë ‰í„°ë¦¬] Example
    // [íŒŒì¼] FileInputStreamTest.java (434)
    // [íŒŒì¼] FilesTest1.java (800)
    // [ë””ë ‰í„°ë¦¬] temp
    // [íŒŒì¼] winhlp.exe (9728)
    // [íŒŒì¼] winhlp32.exe (9728)
    ```
    

## **ë²„í¼**

### ë²„í¼

- ë°ì´í„° ìƒì‚°ìë¡œë¶€í„° í”„ë¡œê·¸ë¨ìœ¼ë¡œ ë°ì´í„°ê°€ ì…ë ¥ ë  ë•Œ, ì…ë ¥ ì†ë„ì™€ ì²˜ë¦¬ ì†ë„ì˜ ì°¨ì´ë¡œ ì¸í•´ ì§€ì—°ì´ ë°œìƒí•  ìˆ˜ ìˆìŒ
    - í”„ë¡œê·¸ë¨ìœ¼ë¡œë¶€í„° ë°ì´í„° ì†Œë¹„ìë¡œ ë°ì´í„°ê°€ ì¶œë ¥ ë  ë•Œë„ ë§ˆì°¬ê°€ì§€
- **ë²„í¼ë¥¼ ì‚¬ìš©í•˜ë©´ ì§€ì—° í˜„ìƒì„ ë°©ì§€í•  ìˆ˜ ìˆìŒ**
    - í”„ë¡œê·¸ë¨ì€ ë²„í¼ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì½ìŒ(ì…ë ¥)
    - í”„ë¡œê·¸ë¨ì€ ë²„í¼ë¡œ ë°ì´í„°ë¥¼ ì¶œë ¥í•¨(ì¶œë ¥)
- ë²„í¼ì˜ ì—­í• 
    
    ![image.png](/assets/img/knou/java/2025-04-28-knou-java-10/image.png)
    

### `Buffer`í´ë˜ìŠ¤

- ë²„í¼ëŠ” ê¸°ë³¸í˜• ê°’ì„ ì €ì¥í•˜ëŠ” ë°ì´í„° ë³´ê´€ì†Œ
    - ì±„ë„ ì…ì¶œë ¥ì— ì‚¬ìš©ë˜ë©° **ë²„í¼ ë‹¨ìœ„ë¡œ ì…ì¶œë ¥**í•  ìˆ˜ ìˆìŒ
- `Buffer`ëŠ” ì¶”ìƒ í´ë˜ìŠ¤ë¡œ `java.nio`íŒ¨í‚¤ì§€ì— ì¡´ì¬
    - ìì‹ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„í•´ì•¼ í•  ê³µí†µì˜ ë©”ì†Œë“œë¥¼ ì„ ì–¸
- ì‹¤ì œ ì‚¬ìš©ì„ ìœ„í•´ booleanì„ ì œì™¸í•œ ëª¨ë“  ê¸°ë³¸í˜•ì— ëŒ€í•´ Bufferì˜ ì„œë¸Œ í´ë˜ìŠ¤ê°€ ì¡´ì¬í•¨
    - `ByteBuffer`, `CharBuffer`, `DoubleBuffer`, `FloatBuffer`, `IntBuffer`, `LongBuffer`, `ShortBuffer`

### ë²„í¼ì˜ ìƒì„±

- ë²„í¼ì˜ ìƒì„± ë°©ë²•
    
    ```java
    Buffer buffer = ByteBuffer.allocate(1024*1024);
    ```
    
    ```java
    byt[] barray = new byte[100];
    ```
    
    ```java
    Buffer bbuffer = ByteBuffer.wrap(barray);
    ```
    
- ë²„í¼ì˜ ì†ì„±
    - 0 â‰¤ `mark`â‰¤ `position`â‰¤ `limit`â‰¤ `capacity`
    - `capacity`
        - ë²„í¼ì˜ í¬ê¸°(ë°ì´í„°ì˜ ê°œìˆ˜)ë¡œ, ìƒì„± ë  ë•Œ ì •í•´ì§
    - `position`
        - ì½ê¸°ë‚˜ ì“°ê¸°ê°€ ì ìš©ë˜ëŠ” ìœ„ì¹˜
        - `position`â‰¤ `limit`
    - `limit`
        - ì½ê±°ë‚˜ ì“¸ ìˆ˜ ì—†ëŠ” ìµœì´ˆ ìœ„ì¹˜
        - `limit`â‰¤ `capacity`
    - `mark`
        - `reset()`ë˜ì—ˆì„ ë•Œ `position`ì´ ê°€ë¦¬í‚¬ ìœ„ì¹˜

### `Buffer`í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œ

- ì£¼ìš” ë©”ì†Œë“œ
    
    | **ë©”ì†Œë“œ** | **ì„¤ëª…** |
    |---|---|
    | `Buffer mark()`| `mark`ë¥¼ `position`ì˜ ê°’ìœ¼ë¡œ ì„¤ì • |
    | `Buffer reset()`| `position`ì„ `mark`ì˜ ê°’ìœ¼ë¡œ ì„¤ì • |
    | `Buffer rewind()`| `position`ì„ 0ìœ¼ë¡œ ë°”ê¾¸ê³  `mark`ë¥¼ ì‚­ì œí•¨, ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì½ê¸°ë¥¼ ì¤€ë¹„í•˜ëŠ” ê²ƒ |
    | `Buffer flip()`| `limit`ë¥¼ `position`ê°’ìœ¼ë¡œ ì„¤ì •í•˜ê³  `position`ì€ 0ìœ¼ë¡œ ë³€ê²½í•¨, ë²„í¼ì— ì“°ê¸°ë¥¼ ëë‚´ê³  ë²„í¼ ì½ê¸°ë¥¼ ì¤€ë¹„í•˜ëŠ” ê²ƒ |
    | `Buffer clear()`| ë²„í¼ë¥¼ ì´ˆê¸° ìƒíƒœë¡œ ëŒë¦¼, ìƒˆë¡œìš´ ì“°ê¸°ë¥¼ ì¤€ë¹„í•˜ëŠ” ê²ƒ |
    | `int capacity()`| í˜„ì¬ `capacity`ê°’ì„ ë¦¬í„´ |
    | `int position()`| í˜„ì¬ `position`ê°’ì„ ë¦¬í„´ |
    | `int limit()`| í˜„ì¬ `limit`ê°’ì„ ë¦¬í„´ |

### ë²„í¼ ì½ê¸°ì™€ ì“°ê¸°

-  `Buffer`ì˜ ì„œë¸Œ í´ë˜ìŠ¤ì—ì„œ ì œê³µ
    - `ByteBuffer`
    - `CharBuffer`
    - `DoubleBuffer`
- **ìƒëŒ€ì  ì½ê¸°/ì“°ê¸°** ë©”ì†Œë“œ
    - í˜„ì¬ `position`ì˜ ìœ„ì¹˜ì—ì„œ ì½ê¸° ë˜ëŠ” ì“°ê¸°ë¥¼ ìˆ˜í–‰í•˜ë©°, ì½ê±°ë‚˜ ì“´ ìš”ì†Œ ë§Œí¼ `position`ê°’ì´ ì¦ê°€í•¨
    
    ```java
    byte get()
    ```
    
    ```java
    ByteBuffer get(byte[])
    ```
    
    ```java
    ByteBuffer put(byte)
    ```
    
    ```java
    ByteBuffer put(byte[])
    ```
    
- **ì ˆëŒ€ì  ì½ê¸°/ì“°ê¸°** ë©”ì†Œë“œ
    - ì½ê±°ë‚˜ ì“¸ ìœ„ì¹˜ë¥¼ ë§¤ê°œ ë³€ìˆ˜ indexë¡œ ì§€ì •
    - `position`ê°’ì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŒ
    
    ```java
    byte get(int index)
    ```
    
    ```java
    ByteBuffer put(int index, byte b)
    ```
    

## **`FileChannel`í´ë˜ìŠ¤**

### **`FileChannel`í´ë˜ìŠ¤**

- `java.io`íŒ¨í‚¤ì§€ì˜ **íŒŒì¼ ê´€ë ¨ ì…ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì„ ëŒ€ì²´**
    - `java.nio.channels`íŒ¨í‚¤ì§€ì— ì¡´ì¬
    - **íŒŒì¼ì— ëŒ€í•œ ì½ê¸°ì™€ ì“°ê¸°**ë¥¼ ëª¨ë‘ ì œê³µ
    - ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
- ì½ê¸°ì™€ ì“°ê¸° ë©”ì†Œë“œ
    
    ```java
    int read(ByteBuffer dst)
    ```
    
    ```java
    int write(ByteBuffer src)
    ```
    
- ê°ì²´ ìƒì„± ë°©ë²•
    
    ```java
    FileChannel.open(Path path, OpenOption ... options)
    ```
    
    - ì˜µì…˜ì€ `StandardOpenOption.READ`
    - ê·¸ ì™¸ `CREATE`, `WRITE`, `APPEND`ë“±
    - `FileInputStream`, `FileOutputStream`ë˜ëŠ” `RandomAccessFile`ê°ì²´ì—ì„œ `getChannel()`

### **`FileChannel`í´ë˜ìŠ¤ë¡œ íŒŒì¼ ë§Œë“¤ê¸°**

```java
public class Main {
    public static void main(String args[]) throws IOException {
        String[] data = { "ì•ˆë…•í•˜ì„¸ìš”, ì—¬ëŸ¬ë¶„",
            "Java í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ ì„¸ê³„ë¡œ ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.",
            "JDKë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì—ì„œë¶€í„° ",
            "Java í”„ë¡œê·¸ë¨ì„ compileí•˜ê³  ì‹¤í–‰ì‹œí‚¤ëŠ” ",
            "ëª¨ë“  ë°©ë²•ì— ëŒ€í•´ ê³µë¶€í•´ë´…ì‹œë‹¤."
        };
        Path path = Paths.get("c:\\Java\\temp\\file.txt");
        
        Files.createDirectories(path.getParent());
        
        FileChannel fileChannel = FileChannel.open(path, 
            StandardOpenOption.CREATE,
            StandardOpenOption.WRITE);
                
        Charset charset = Charset.defaultCharset();
        ByteBuffer buffer;
        
        int byteCount = 0;
        
        for (int i = 0; i < data.length; i++) {
            buffer = charset.encode(data[i]);
            byteCount = fileChannel.write(buffer);
        }
        
        System.out.println(byteCount);
        fileChannel.close();
    }
}
```

### **`FileChannel`í´ë˜ìŠ¤ë¡œ íŒŒì¼ ì½ê¸°**

```java
public class Main {
    public static void main(String args[]) throws IOException {
        Path path = Paths.get("c:\\java\\temp\\file.txt");
        
        FileChannel fileChannel = FileChannel.open(path, StandardOpenOption.READ);
        ByteBuffer buffer = ByteBuffer.allocate(1024 * 1024);
        Charset charset = Charset.defaultCharset();
        StringBuffer sb = new StringBuffer();
        int byteCount;
        
        while ((byteCount = fileChannel.read(buffer)) >= 0) {
            buffer.flip();
            sb.append(charset.decode(buffer));
            buffer.clear();
        }
        
        System.out.println(sb);
        
        fileChannel.close();
    }
}

// ì•ˆë…•í•˜ì„¸ìš”, ì—¬ëŸ¬ë¶„Java í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì˜ ì„¸ê³„ë¡œ ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. JDKë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì—ì„œë¶€í„° Java í”„ë¡œê·¸ë¨ì„ compileí•˜ê³  ì‹¤í–‰ì‹œí‚¤ëŠ” ëª¨ë“  ë°©ë²•ì— ëŒ€í•´ ê³µë¶€í•´ ë´…ì‹œë‹¤.
```

## **`WatchService`ì¸í„°í˜ì´ìŠ¤**

### **`WatchService`ì¸í„°í˜ì´ìŠ¤**

- **`WatchService`**
    - ì–´ë–¤ ëŒ€ìƒì„ ì •í•œ í›„ ë³€í™”ë‚˜ ì´ë²¤íŠ¸ê°€ ìƒê¸°ëŠ” ê²ƒì„ ê°ì‹œ(watch)
    - ê°ì‹œ ëŒ€ìƒì€ `Watchable`ê°ì²´ë¡œ, `register()`ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ `WatchService`ê°ì²´ì— ê°ì‹œ ëŒ€ìƒìœ¼ë¡œ ë“±ë¡ ë¨
    - ë””ë ‰í„°ë¦¬ë¥¼ í‘œí˜„í•˜ëŠ” `Path`ê°ì²´ì˜ ë³€í™”ë¥¼ ê°ì§€
        - ë””ë ‰í„°ë¦¬ ë‚´ì˜ íŒŒì¼ ë˜ëŠ” ì„œë¸Œ ë””ë ‰í„°ë¦¬ì˜ ìƒì„±, ì‚­ì œ, ìˆ˜ì •
    - `java.nio.file`íŒ¨í‚¤ì§€ì— ì¡´ì¬
- ê°ì‹œìì˜ ìƒì„±
    - ë¨¼ì € `WatchService`ê°ì²´ë¥¼ ìƒì„±í•¨
    
    ```java
    WatchService ws = FileSystem.getDefault().newWatchService();
    ```
    

### ê°ì‹œ ì ˆì°¨

- ê°ì‹œ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ì ˆì°¨
    - ê°ì‹œ ëŒ€ìƒ ë””ë ‰í„°ë¦¬ë¥¼ `WatchServcie`ì— ë“±ë¡
        
        ```java
        Path path = Paths.get("c\\java\\temp");
        ```
        
        - ë“±ë¡ ì‹œ ì•Œë¦¼ì„ ë°›ê³ ì í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ëª…ì‹œ
        
        ```java
        path.register(ws, StandardWatchEventKinds.ENTRY_CREATE, StandardWatchEventKinds.ENTRY_DELETE, StandardWatchEventKinds.ENTRY_MODIFY);
        ```
        
    - **`WatchService`ëŠ” `take()`ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ê°ì‹œí•¨**
        - ë¬´í•œ ë£¨í”„ ì•ˆì—ì„œ, ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦¼
        
        ```java
        While(true) {
            WatchKey key = ws.takae();
        }
        ```
        
    - ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´, `take()`ê°€ ë¦¬í„´í•˜ëŠ” `WatchKey`ê°ì²´ë¥¼ ì´ìš©í•˜ì—¬ ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬
    - `WatchKey`ëŠ” ê°ì‹œ ìƒíƒœ, ê°ì‹œ ëŒ€ìƒ ë””ë ‰í„°ë¦¬, ì´ë²¤íŠ¸ ì •ë³´ë¥¼ ê°€ì§
        - `pollEvents()`ë¥¼ í˜¸ì¶œí•˜ì—¬ `WatchEvent`ê°ì²´ë¥¼ ì–»ê³  ì–´ë–¤ ë³€í™”ê°€ ìƒê²¼ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŒ
        
        ```java
        for (WatchEvent<?> event : key.pollEvents()) {
            WatchEvent.Kind k = event.kind(); // ì´ë²¤íŠ¸ ì¢…ë¥˜
            Path p = (Path) event.context(); // íŒŒì¼ ì´ë¦„
        			
        }
        
        boolean valid = key.reset(); // ê³„ì† ê°ì‹œí•˜ê¸° ìœ„í•´
        if (!valid)
        break;
        ```
        

### **`WatchService` ì˜ˆì œ**

- `WatchServcie`ì¸í„°í˜ì´ìŠ¤ ì´ìš©í•˜ê¸°
    
    ```java
    try {
        WatchService ws;
        ws = FileSystems.getDefault().newWatchService();
        Path path = Paths.get("c:\\java\\temp");
        path.register(ws, StandardWatchEventKinds.ENTRY_CREATE,
                StandardWatchEventKinds.ENTRY_DELETE, StandardWatchEventKinds.ENTRY_MODIFY);
                
        while (true) {
            WatchKey key = ws.take();
            
            for (WatchEvent<?> event : key.pollEvents()) {
                WatchEvent.Kind k = event.kind();
                Path p = (Path) event.context();
            
                if (k == StandardWatchEventKinds.ENTRY_CREATE) {
                    System.out.println("File " + p.getFileName() + " is created.");
                } else if (k == StandardWatchEventKinds.ENTRY_DELETE) {
                    System.out.println("File " + p.getFileName() + " is deleted.");
                }
    
                boolean valid = key.reset();
                if (!valid) break;
            }
        }
    }
    
    // File file.txt is modified.
    // File ìƒˆ í…ìŠ¤íŠ¸ ë¬¸ì„œ.txt is created.
    // File ìƒˆ í…ìŠ¤íŠ¸ ë¬¸ì„œ.txt is deleted.
    // File ìƒˆ ë¬¸ì„œ.txt is created.
    ```

<br/><br/>

# í•™ìŠµ ì •ë¦¬

---

- `java.nio`ì™€ ê·¸ê²ƒì˜ ì„œë¸Œ íŒ¨í‚¤ì§€ëŠ” `java.io`íŒ¨í‚¤ì§€ë¥¼ ê°œì„ í•œ ìƒˆë¡œìš´ ì…ì¶œë ¥ íŒ¨í‚¤ì§€ì„
- `java.nio.file`íŒ¨í‚¤ì§€ì˜ `Path`ì¸í„°í˜ì´ìŠ¤ëŠ” `java.io`íŒ¨í‚¤ì§€ì˜ `File`í´ë˜ìŠ¤ë³´ë‹¤ í’ë¶€í•œ ê¸°ëŠ¥ì„ ì œê³µí•¨
- `Files`í´ë˜ìŠ¤ëŠ” ì‹¤ì œ íŒŒì¼(ë˜ëŠ” ë””ë ‰í„°ë¦¬) ì¡°ì‘ê³¼ ì½ê¸° Â· ì“°ê¸° ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” `static`ë©”ì†Œë“œë¥¼ ì œê³µí•¨
- ì±„ë„ ì…ì¶œë ¥ì—ì„œ ë²„í¼ëŠ” ê¸°ë³¸í˜• ë°ì´í„°ì˜ ë³´ê´€ì†Œì´ë©°, ë²„í¼ ë‹¨ìœ„ë¡œ ì…ì¶œë ¥í•  ìˆ˜ ìˆìŒ
- `java.nio.file`ì˜ `FileChannel`ì€ ì…ì¶œë ¥ì„ ëª¨ë‘ ì œê³µí•˜ê³  ê¸°ë³¸ì ìœ¼ë¡œ ë²„í¼ë§ì„ ì‚¬ìš©í•˜ë©° ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì•ˆì „í•˜ë„ë¡ ì„¤ê³„ë˜ì–´ ìˆìŒ
- `java.nio.file`íŒ¨í‚¤ì§€ì˜ `WatchService`ëŠ” ë””ë ‰í„°ë¦¬ì— ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ê°ì‹œí•˜ëŠ” ì„œë¹„ìŠ¤ì„

<br/><br/>

# ì—°ìŠµ ë¬¸ì œ

---

1. `Path`ì¸í„°í˜ì´ìŠ¤ì— ê´€í•œ ì„¤ëª…ì´ë‹¤. ì˜ëª»ëœ ê²ƒì€?
    
    a. íŒŒì¼ ë‚´ìš©ì˜ ì½ê¸°ì™€ ì“°ê¸° ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

    - `Path`ì¸í„°í˜ì´ìŠ¤ì— ê´€í•œ ì„¤ëª…ìœ¼ë¡œ ì˜³ì€ ê²ƒ
        - `java.io.File`í´ë˜ìŠ¤ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆìŒ
        - íŒŒì¼ ì‹œìŠ¤í…œì— ì¡´ì¬í•˜ëŠ” íŒŒì¼ì´ë‚˜ ë””ë ‰í„°ë¦¬ì˜ ê²½ë¡œë¥¼ í‘œí˜„í•¨
        - ê²½ë¡œì˜ ìƒì„±, ê²½ë¡œì˜ ì¡°ì‘/ë¹„êµ, ê²½ë¡œì˜ ìš”ì†Œë¥¼ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•¨
2. `FileChannel`í´ë˜ìŠ¤ì— ê´€í•œ ì„¤ëª…ìœ¼ë¡œ í‹€ë¦° ê²ƒì€ ë¬´ì—‡ì¸ê°€
    
    a. íŒŒì¼ ì…ë ¥ì„ ìœ„í•´ `FileChannelReader`, íŒŒì¼ ì¶œë ¥ì„ ìœ„í•´ `FileChannelWriter`ë¥¼ ì‚¬ìš©í•œë‹¤.
    
    - `FileChannel`í´ë˜ìŠ¤ì— ê´€í•œ ì„¤ëª…ìœ¼ë¡œ ì˜³ì€ ê²ƒ
        - `java.io`íŒ¨í‚¤ì§€ì˜ íŒŒì¼ ê´€ë ¨ ìŠ¤íŠ¸ë¦¼ í´ë˜ìŠ¤ë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•œ í´ë˜ìŠ¤ì„
        - `FileChannel.open(path)`ìœ¼ë¡œ ê°ì²´ ìƒì„±ì„ í•˜ë©´ í•´ë‹¹ íŒŒì¼ì„ ì½ê¸° ìš©ìœ¼ë¡œ ì—´ê²Œ ë¨
        - ë©€í‹° ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì„¤ê³„ë˜ì—ˆìŒ
3. `WatchService`ë¥¼ ì´ìš©í•´ ë””ë ‰í„°ë¦¬ë¥¼ ê°ì‹œí•  ë•Œ, `take()`ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•œë‹¤. ì´ë•Œ ë””ë ‰í„°ë¦¬ì— ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ `take()`ê°€ `WatchKey`ê°ì²´ë¥¼ ë¦¬í„´í•œë‹¤. `WatchKey`ì— ê´€í•´ ì„¤ëª…í•˜ë¼.
    
    a. `WatchKey`ëŠ” ë“±ë¡ëœ ë””ë ‰í„°ë¦¬ì— ì–´ë–¤ ê´€ì‹¬ ì´ë²¤íŠ¸ê°€ ë“±ë¡ë˜ì–´ ìˆìœ¼ë©°, ì‹¤ì œ ì–´ë–¤ ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚¬ëŠ” ì§€ì— ê´€í•œ ìƒíƒœ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤.